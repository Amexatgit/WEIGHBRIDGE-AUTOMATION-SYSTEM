[ Load Cell ]     [ ANPR Camera ]
     â†“                â†“
[ C++ Sensor Interface + ANPR (OpenCV) ]
                â†“
     [Data Processing & Formatting]
                â†“
       [MySQL Database Storage]

### Project Structure Overview

The Weighbridge Automation System follows a modular, object-oriented architecture designed for maintainability, scalability, and cross-platform compatibility. The system is organized into distinct layers with clear separation of concerns.

```
ğŸ“ WEIGHBRIDGE-AUTOMATION-SYSTEM/
â”œâ”€â”€ ğŸ“ vehicle_weighbridge/          # Core C++ application
â”‚   â”œâ”€â”€ ğŸ“„ main.cpp                  # Application entry point
â”‚   â”œâ”€â”€ ğŸ“„ CMakeLists.txt            # Build configuration
â”‚   â”œâ”€â”€ ğŸ“„ DataStorage.h             # Abstract storage interface
â”‚   â”œâ”€â”€ ğŸ“„ SerialReader.h/.cpp       # Microcontroller communication
â”‚   â”œâ”€â”€ ğŸ“„ CameraHandler.h/.cpp     # OpenCV image processing
â”‚   â”œâ”€â”€ ğŸ“„ MySQLHandler.h/.cpp      # MySQL database storage
â”‚   â”œâ”€â”€ ğŸ“„ CSVHandler.h/.cpp         # CSV file storage
â”‚   â””â”€â”€ ğŸ“„ ExcelHandler.h/.cpp      # Excel XML storage
â”œâ”€â”€ ğŸ“„ CREATE-TABLE.sql              # Database schema
â”œâ”€â”€ ğŸ“ ESP32 installation Code/      # Microcontroller firmware
â””â”€â”€ ğŸ“„ Architecture design           # System design reference
```

### Core Architecture Components

#### 1. **Data Flow Architecture**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Load Cell     â”‚    â”‚  Microcontrollerâ”‚    â”‚  Data Storage   â”‚
@@ -569,16 +591,218 @@ CSI Port      |    Camera Module
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. **Software Architecture Layers**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   main.cpp      â”‚  â”‚  DataStorage    â”‚  â”‚  Threading   â”‚  â”‚
â”‚  â”‚  (Orchestrator) â”‚  â”‚  (Interface)    â”‚  â”‚  Management  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Service Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SerialReader   â”‚  â”‚  CameraHandler   â”‚  â”‚  Storage     â”‚  â”‚
â”‚  â”‚  (Hardware I/O) â”‚  â”‚  (OpenCV)        â”‚  â”‚  Handlers    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Hardware Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Load Cell     â”‚  â”‚   Camera        â”‚  â”‚  Storage     â”‚  â”‚
â”‚  â”‚   (HX711)       â”‚  â”‚   (USB/CSI)     â”‚  â”‚  (MySQL/CSV) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### File Relationships and Dependencies

#### **Core Module Dependencies**
```
main.cpp
â”œâ”€â”€ SerialReader.h/.cpp          # Hardware communication
â”œâ”€â”€ CameraHandler.h/.cpp         # Image processing
â”œâ”€â”€ DataStorage.h                # Abstract interface
â”œâ”€â”€ MySQLHandler.h/.cpp         # Database storage
â”œâ”€â”€ CSVHandler.h/.cpp           # File storage
â””â”€â”€ ExcelHandler.h/.cpp         # Excel storage
```

#### **Class Hierarchy and Interfaces**

```cpp
// Abstract Base Class
DataStorage (Interface)
â”œâ”€â”€ MySQLHandler : public DataStorage
â”œâ”€â”€ CSVHandler : public DataStorage
â””â”€â”€ ExcelHandler : public DataStorage

// Hardware Interface Classes
SerialReader (Hardware Communication)
CameraHandler (Image Processing)
```
### Component Interaction Flow
#### **1. System Initialization**
```cpp
// main.cpp - Application startup
SerialReader serial("/dev/ttyUSB0", 9600);     // Hardware interface
CameraHandler camera;                          // Image processing
DataStorage* storage = createStorageBackend(); // Storage abstraction
```

#### **2. Data Processing Pipeline**
```
1. Vehicle Detection â†’ SerialReader.readWeight()
2. Weight Measurement â†’ Data validation and formatting
3. Camera Capture â†’ CameraHandler.captureImage()
4. License Plate Recognition â†’ OpenCV image processing
5. Data Storage â†’ Storage backend selection (MySQL/CSV/Excel)
6. System Logging â†’ Error handling and monitoring
```
1. Vehicle Detection â†’ Load Cell Reading
2. Weight Measurement â†’ Data Validation
3. Camera Capture â†’ Image Processing
4. License Plate Recognition â†’ Data Extraction
5. Data Storage â†’ Multiple Format Support
6. System Logging â†’ Error Handling

#### **3. Storage Backend Selection**
```cpp
// Environment-based configuration
if (backend == "CSV") {
    storage = std::make_unique<CSVHandler>(csvPath);
} else if (backend == "EXCEL") {
    storage = std::make_unique<ExcelHandler>(xlsPath);
} else {
    storage = std::make_unique<MySQLHandler>(host, user, pass, db);
}
```

### Build System Architecture

#### **CMake Configuration**
```cmake
# CMakeLists.txt - Build system
cmake_minimum_required(VERSION 3.10)
project(WebBridgeSystem)
# Dependencies
find_package(OpenCV REQUIRED)      # Computer vision
find_package(Threads REQUIRED)     # Multi-threading
# Source files
add_executable(WebBridgeSystem
    main.cpp
    SerialReader.cpp
    CameraHandler.cpp
    MySQLHandler.cpp
    CSVHandler.cpp
    ExcelHandler.cpp
)
# Linking
target_link_libraries(WebBridgeSystem
    ${OpenCV_LIBS}     # OpenCV libraries
    mysqlcppconn       # MySQL connector
    pthread            # Threading support
)
```

### Data Storage Architecture

#### **Storage Interface Design**
```cpp
// DataStorage.h - Abstract interface
class DataStorage {
public:
    virtual ~DataStorage() = default;
    virtual void insertData(const std::string& weight,
                           const std::string& timestamp,
                           const std::string& imagePath) = 0;
};
```
#### **Storage Implementation Hierarchy**
```
DataStorage (Abstract)
â”œâ”€â”€ MySQLHandler
â”‚   â”œâ”€â”€ Database connection management
â”‚   â”œâ”€â”€ SQL query execution
â”‚   â””â”€â”€ Transaction handling
â”œâ”€â”€ CSVHandler
â”‚   â”œâ”€â”€ File I/O operations
â”‚   â”œâ”€â”€ Data formatting
â”‚   â””â”€â”€ Error handling
â””â”€â”€ ExcelHandler
    â”œâ”€â”€ XML generation
    â”œâ”€â”€ Excel formatting
    â””â”€â”€ Template support
```
### Hardware Integration Architecture
#### **Serial Communication Layer**
```cpp
// SerialReader.h - Hardware interface
class SerialReader {
public:
    SerialReader(const std::string& port, int baudRate);
    std::string readWeight();  // Read from load cell via HX711
private:
    int fd;  // File descriptor for serial port
};
```

#### **Camera Processing Layer**
```cpp
// CameraHandler.h - Image processing
class CameraHandler {
public:
    std::string captureImage(const std::string& filename);
    // OpenCV integration for license plate recognition
};
```
### Threading and Concurrency
#### **Multi-threaded Data Processing**
```cpp
// main.cpp - Concurrent processing
while (true) {
    std::string weightData = serial.readWeight();     // Hardware thread
    std::string imagePath = camera.captureImage();   // Camera thread
    storage->insertData(weight, timestamp, imagePath); // Storage thread
    std::this_thread::sleep_for(std::chrono::seconds(5));
}
```

### Configuration Management

#### **Environment-based Configuration**
```bash
# Runtime configuration via environment variables
STORAGE_BACKEND=MYSQL|CSV|EXCEL
DB_HOST=localhost
DB_USER=weighbridge_user
DB_PASS=secure_password
CSV_PATH=/data/records.csv
EXCEL_PATH=/reports/data.xml
```

### Error Handling and Logging

#### **Exception Handling Strategy**
- **Hardware Layer**: Serial communication error handling
- **Processing Layer**: OpenCV exception management
- **Storage Layer**: Database connection and file I/O error handling
- **Application Layer**: Global exception handling and logging

### Performance Considerations

#### **Optimization Strategies**
- **Memory Management**: Smart pointers and RAII principles
- **I/O Operations**: Asynchronous data processing
- **Database Connections**: Connection pooling and reuse
- **Image Processing**: OpenCV optimization and caching

![System Architecture Diagram](LOAD%20CELL.png)

## ğŸ“Š Usage Examples
Footer
Â© 2025 GitHub, Inc.
Footer navigation
Terms
Privacy
Security
Status
Community
Docs
Contact
Manage cookies
Do not share my personal information
Editing WEIGHBRIDGE-AUTOMATION-SYSTEM/README.md at feature/documentation Â· AnshRaj112/WEIGHBRIDGE-AUTOMATION-SYSTEM 
